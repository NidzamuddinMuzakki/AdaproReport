(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{1874:function(e,t,n){"use strict";n.r(t);var a=n(418),r=n(421),o=n(424),i=n(423),l=(n(500),n(0)),s=n.n(l),c=n(112),u=n(9),d=n(1241),h=n(110),p=n(1240),f=n.n(p),m=n(1196),g=(n(966),n(964)),b=n(1019),v=n.n(b),y=n(402),E=n(1022),k=(n(1213),[]),w=[],x=[],O={items:""};function S(e,t){var n=[];for(var a in e)if(e[a].parent_origin==t&&"false"!=e[a].access_view){var r=S(e,e[a].menu_id);r.length&&""==e[a].url?(e[a].children=r,n.push(e[a])):""!=e[a].url&&n.push(e[a])}return n}var j=function(){var e=Object(E.a)(v.a.mark(function e(){var t,n,a,r,o,i,l,s;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("id_token"),n={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({key:t,info_data:"all"})},e.prev=2,e.next=5,fetch("http://localhost:5000/credential_service/get_menu",n);case 5:return a=e.sent,e.next=8,a.json();case 8:r=e.sent,[],r.dataOrigin,O.items=r.dataChanged,k.push(S(r.dataOrigin,"")),S(r.dataOrigin,""),w.push({path:"/",exact:!0,name:"Home"}),w.push({path:"/dashboard",name:"Dashboard"}),o=[],i=Object(y.a)(r.dataOrigin);try{for(i.s();!(l=i.n()).done;)""!=(s=l.value).url&&"false"!=s.access_view&&(w.push({path:s.url,name:s.name}),x.push(s)),""!=s.url&&o.push({Name:s.name,View:"true",Create:"true",Update:"true",Delete:"true"})}catch(c){i.e(c)}finally{i.f()}return k.push(w),k.push(x),k.push(o),e.abrupt("return",k);case 25:return e.prev=25,e.t0=e.catch(2),e.abrupt("return",e.t0);case 28:case"end":return e.stop()}},e,null,[[2,25]])}));return function(){return e.apply(this,arguments)}}(),N=(n(403),localStorage.getItem("id_token"),n(1016)),_=n(645);n(1029);var I=n(1836),R=n(1837),T=n(1032),A=n(1031),M=n.n(A),P=n(1239),C=n.n(P),z=(n(1236),function(e){var t=e.treeItems,n=e.create,a=e.update,r=e.delete1,o=e.read;return s.a.createElement(I.a,{style:{height:264,flexGrow:1,maxWidth:400},defaultCollapseIcon:s.a.createElement(M.a,null),defaultExpandIcon:s.a.createElement(C.a,null),defaultEndIcon:s.a.createElement("div",{style:{width:24}})},W(t,n,a,r,o))}),$=Object(N.a)(function(e){return{root:{"&:hover > $content":{backgroundColor:"black"},"&:focus > $content, &$selected > $content":{backgroundColor:"black"},"&:focus > $content $label, &:hover > $content $label, &$selected > $content $label":{backgroundColor:"black"}},content:{borderTopRightRadius:e.spacing(2),borderBottomRightRadius:e.spacing(2),paddingRight:e.spacing(1),fontWeight:e.typography.fontWeightMedium,"$expanded > &":{fontWeight:e.typography.fontWeightRegular}},group:{marginLeft:10,borderLeft:"1px dashed white","& $content":{paddingLeft:e.spacing(1),marginLeft:-5}},expanded:{},selected:{},label:{fontWeight:"inherit",color:"inherit"},labelRoot:{display:"flex",alignItems:"center",padding:e.spacing(.5,0)},labelIcon:{marginRight:e.spacing(1)},labelText:{fontWeight:"inherit",flexGrow:1}}});var W=function e(t,n,a,r,o){var i=$();return t.map(function(t){var n=void 0;if(t.children&&t.children.length>0&&(n=e(t.children)),0!=t.length)return s.a.createElement(R.a,{key:t.menu_id,nodeId:t.menu_id,label:s.a.createElement("div",{className:i.labelRoot},""==t.url&&""==t.parent_origin?s.a.createElement(f.a,{className:i.labelIcon}):"",""!=t.url?s.a.createElement(c.b,{style:{textDecoration:"none",color:"white",width:"200%"},to:t.url},s.a.createElement(T.a,{className:i.labelText,variant:"body2"},t.name)):s.a.createElement(T.a,{className:i.labelText,variant:"body2"},t.name)),classes:{root:i.root,content:i.content,expanded:i.expanded,selected:i.selected,group:i.group,label:i.label},children:n})})},L=s.a.lazy(function(){return Promise.all([n.e(1),n.e(4),n.e(10),n.e(16),n.e(35)]).then(n.bind(null,1848))}),D=(s.a.lazy(function(){return Promise.all([n.e(0),n.e(1),n.e(10),n.e(15),n.e(28)]).then(n.bind(null,1853))}),s.a.lazy(function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(13)]).then(n.bind(null,1883))})),J=s.a.lazy(function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(21)]).then(n.bind(null,1884))}),U=s.a.lazy(function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(22)]).then(n.bind(null,1885))}),B=s.a.lazy(function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(20)]).then(n.bind(null,1886))}),G=s.a.lazy(function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(19)]).then(n.bind(null,1887))}),H=s.a.lazy(function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(24)]).then(n.bind(null,1879))}),V=(s.a.lazy(function(){return Promise.all([n.e(0),n.e(2),n.e(25),n.e(29)]).then(n.bind(null,1888))}),s.a.lazy(function(){return Promise.all([n.e(4),n.e(7),n.e(9)]).then(n.bind(null,1845))}),s.a.lazy(function(){return n.e(33).then(n.bind(null,1873))})),Y=s.a.lazy(function(){return n.e(34).then(n.bind(null,1871))}),q=s.a.lazy(function(){return Promise.all([n.e(4),n.e(27)]).then(n.bind(null,1872))}),F=function(e){Object(o.a)(n,e);var t=Object(i.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).Auth=new _.a,r.createNotification=function(e){return function(){switch(e){case"info":m.NotificationManager.info("Info message");break;case"success":m.NotificationManager.success("Success message","Title here");break;case"warning":m.NotificationManager.warning("Warning message","Close after 3000ms",3e3);break;case"error":m.NotificationManager.error("Error message","Click me!",5e3,function(){alert("callback")})}}},r.loading=function(){return s.a.createElement("div",{className:"animated fadeIn pt-1 text-center"},"Loading...")},r._handleLogout=function(){r.Auth.logout(),r.props.history.replace("/login")},r.state={dataRoutes:[],dataAsidemenu:[],dataAccess:[],create:!1,update:!1,read:!1,delete:!1,coba:[],tanggal:""},r}return Object(r.a)(n,[{key:"componentWillMount",value:function(){var e=this;Promise.resolve(j()).then(function(t){return t.length>0?e.setState({dataAsidemenu:t[0],dataRoutes:t[1],dataAccess:t[2],coba:t[3]}):e._handleLogout()}),console.log(this.state.dataAsidemenu)}},{key:"componentDidUpdate",value:function(e,t,n){console.log(this.props.notif),this.state.tanggal.toString()!=this.props.notif.date.toString()&&(this.setState({tanggal:this.props.notif.date}),"success"==this.props.notif.variant?m.NotificationManager.success(this.props.notif.message,"Success",3e3):"error"==this.props.notif.variant?m.NotificationManager.error(this.props.notif.message,"Error",3e3):"warning"==this.props.notif.variant?m.NotificationManager.warning(this.props.notif.message,"Warning",3e3):"info"==this.props.notif.variant&&m.NotificationManager.info(this.props.notif.message,"Info",3e3)),console.log(this.state.dataAsidemenu),console.log(this.state.dataRoutes),console.log(this.state.coba),this.state.dataAccess&&(this.props.MenuAccess(this.state.dataAccess),this.props.MenuPilihan(this.state.coba))}},{key:"signOut",value:function(e){e.preventDefault(),this.props.history.replace("/login")}},{key:"render",value:function(){return s.a.createElement("div",{className:"app"},s.a.createElement(g.e,{fixed:!0},s.a.createElement(l.Suspense,{fallback:this.loading()},s.a.createElement(q,{onLogout:this._handleLogout}))),s.a.createElement("div",{className:"app-body"},s.a.createElement(m.NotificationContainer,null),s.a.createElement(g.h,{fixed:!0,display:"lg"},s.a.createElement(g.k,null),s.a.createElement(g.j,null),s.a.createElement(l.Suspense,null,this.state.dataAsidemenu.length>0?s.a.createElement(z,{treeItems:this.state.dataAsidemenu,create:this.state.create,read:this.state.read,delete1:this.state.delete,update:this.state.update}):""),s.a.createElement(g.i,null)),s.a.createElement("main",{className:"main"},s.a.createElement(g.c,{appRoutes:this.state.dataRoutes?this.state.dataRoutes:""}),s.a.createElement(d.a,{fluid:!0},s.a.createElement(l.Suspense,{fallback:this.loading()},this.state.dataRoutes.length>0?s.a.createElement(u.d,null,this.state.dataRoutes?this.state.dataRoutes.map(function(e,t){return s.a.createElement(u.b,{key:t,path:e.path,exact:e.exact},"Dashboard"==e.name?s.a.createElement(L,null):"user"==e.name?s.a.createElement(D,null):"role"==e.name?s.a.createElement(G,null):"log action"==e.name?s.a.createElement(H,null):"group"==e.name?s.a.createElement(U,null):"department"==e.name?s.a.createElement(J,null):"branch"==e.name?s.a.createElement(B,null):s.a.createElement(L,null))}):"",s.a.createElement(u.a,{from:"/",to:"/dashboard"})):""))),s.a.createElement(g.a,{fixed:!0},s.a.createElement(l.Suspense,{fallback:this.loading()},s.a.createElement(V,null)))),s.a.createElement(g.d,null,s.a.createElement(l.Suspense,{fallback:this.loading()},s.a.createElement(Y,null))))}}]),n}(l.Component),K=Object(h.connect)(function(e){return{notif:e.Notif}},function(e){return{accessuser:function(t,n,a,r){return e({type:"YES",payload:{accesscreate:t,accessview:n,accessupdate:a,accessdelete:r}})},MenuAccess:function(t){return e({type:"MenuAccess",payload:{data:t}})},MenuPilihan:function(t){return e({type:"MenuPilihan",payload:{data:t}})}}})(F);t.default=function(e){var t=new _.a;return function(n){Object(o.a)(c,n);var l=Object(i.a)(c);function c(){var e;Object(a.a)(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=l.call.apply(l,[this].concat(n))).state={confirm:null,loaded:!1},e}return Object(r.a)(c,[{key:"componentWillMount",value:function(){if(t.loggedIn())try{var e=t.getConfirm();console.log("confirmation is ",e),this.setState({confirm:e,loaded:!0})}catch(n){console.log(n),t.logout(),this.props.history.replace("/login")}else this.props.history.replace("/login")}},{key:"render",value:function(){return!0===this.state.loaded?this.state.confirm?(console.log("confirmed."),s.a.createElement(e,Object.assign({},this.props,{hisotry:this.props.history,confirm:this.state.confirm}))):(console.log("not confirmed."),null):null}}]),c}(l.Component)}(K)},403:function(e,t,n){"use strict";var a=n(644),r=n.n(a);t.a=r.a.create({baseURL:"http://localhost:5000/credential_service"})},645:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n(1),r=n(418),o=n(836),i=n.n(o),l=(n(110),function e(){var t=this;Object(r.a)(this,e),this.login=function(e,n){return t.fetch("http://localhost:5000/credential_service/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:n})}).then(function(e){return t.setToken(e.data),console.log(e.data),e})},this.loggedIn=function(){var e=t.getToken();return!!e&&!t.isTokenExpired(e)},this.isTokenExpired=function(e){try{return i()(e).exp<Date.now()/1e3}catch(t){return console.log("Token expired."),!1}},this.setToken=function(e){localStorage.setItem("id_token",e)},this.getToken=function(){return localStorage.getItem("id_token")},this.logout=function(){localStorage.removeItem("id_token")},this.getConfirm=function(){var e=i()(t.getToken());return console.log("Received answer."),e},this.fetch=function(e,n){var r={Accept:"application/json","Content-Type":"application/json"};return t.loggedIn()&&(r.Authorization="Bearer "+t.getToken()),fetch(e,Object(a.a)({headers:r},n)).then(t._checkStatus).then(function(e){return e.json()})},this._checkStatus=function(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}})}}]);
//# sourceMappingURL=30.aee2ebbc.chunk.js.map