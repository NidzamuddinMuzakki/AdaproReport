(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{1853:function(e,t,a){"use strict";a.r(t);var n=a(111),o=a(418),l=a(421),r=a(424),c=a(423),i=a(0),s=a.n(i),u=(a(63),a(338),a(1090),a(875)),d=(a(879),a(756)),h=a(403),m=function(e){Object(r.a)(a,e);var t=Object(c.a)(a);function a(e){var l,r;return Object(o.a)(this,a),(r=t.call(this,e)).getTableData=function(){r.hotTableComponent.current.hotInstance.updateSettings({columns:r.cols}),r.hotTableComponent.current.hotInstance.validateColumns([0,1,2],function(e){e?h.a.post("/api/credential/role/put",null,{params:{data:r.dataChanges,len:r.hotTableComponent.current.hotInstance.getSourceData().length}}).then(function(e){}):alert("Invalid!")})},r.resetTableData=function(){r.getRoleData(),r.dataChanges=[]},r.lockTableData=function(){for(var e=0;e<r.cols.length;e++)r.cols[e].readOnly=!0;r.hotTableComponent.current.hotInstance.updateSettings({columns:r.cols})},r.editTableData=function(){for(var e=0;e<r.cols.length;e++)r.cols[e].readOnly=!1;r.hotTableComponent.current.hotInstance.updateSettings({columns:r.colsEdit,colHeaders:r.colsHeader})},r.createEmptyCell=function(e,t){for(var a=[],n=[],o=0;o<e;o++){for(var l=0;l<t;l++)n.push("");a.push(n),n=[]}return a},r.handleChange=function(e,t){return function(a){r.setState({settings:Object(n.a)({},e,t[a.target.checked?1:0])})}},r.getConfig=function(){h.a.get("/api/report/config/get?report=LB01").then(function(e){console.log(e.data.table)})},r.cols=[{data:"roleid",readOnly:!0,allowEmpty:!1},{data:"rolename",readOnly:!0,allowEmpty:!1}],r.colsEdit=[{data:"roleid",readOnly:!1,allowEmpty:!1},{data:"rolename",readOnly:!1,allowEmpty:!1}],r.colsHeader=["Role ID","Role Name"],r.dataChanges=[],r.hotSettings={columns:r.colsEdit,colWidths:[150,200],width:"100%",height:320,rowHeights:23,rowHeaders:!0,columnSorting:!0,contextMenu:{items:(l={undo:{},redo:{},separator:d.a.plugins.ContextMenu.SEPARATOR,row_above:{name:"Insert row above"},row_below:{}},Object(n.a)(l,"separator",d.a.plugins.ContextMenu.SEPARATOR),Object(n.a)(l,"remove_row",{}),Object(n.a)(l,"separator",d.a.plugins.ContextMenu.SEPARATOR),l)},manualColumnResize:!0,manualRowResize:!0,manualRowMove:!0,manualColumnMove:!0,afterOnCellMouseOver:function(e,t){!1===r.cols[0].readOnly&&"roleid"===r.hotTableComponent.current.hotInstance.getCellMeta(t.row,t.col).prop&&r.hotTableComponent.current.hotInstance.updateSettings({columns:r.colsEdit})},beforeRemoveRow:function(e,t,a){console.log(e+" - "+t),console.log(r.hotTableComponent.current.hotInstance.getCellMeta(e,0).prop);for(var n={Action:"",RowNumber:null,Key:{FieldName:"roleid",FieldValue:""},RecordData:{}},o="",l="",c=!1,i=0;i<r.dataChanges.length;i++)r.dataChanges[i].RowNumber==e&&(o=r.dataChanges[i].Action,l=r.dataChanges[i].Key.FieldValue,r.dataChanges.splice(i,1),c=!0);c&&"I"!=o?(n.Action="D",n.RowNumber=null,n.Key.FieldValue=l,r.dataChanges.push(n)):(n.Action="D",n.RowNumber=null,n.Key.FieldValue=r.hotTableComponent.current.hotInstance.getDataAtCell(e,0),r.dataChanges.push(n)),console.log(e);for(var s=0;s<r.dataChanges.length;s++)r.dataChanges[s].RowNumber>=e&&(r.dataChanges[s].RowNumber-=1);console.log(r.dataChanges)},afterRemoveRow:function(e,t,a){},beforeCreateRow:function(e,t,a){console.log(e);for(var n=0;n<r.dataChanges.length;n++)r.dataChanges[n].RowNumber>=e&&(r.dataChanges[n].RowNumber+=1);console.log(r.dataChanges)},afterCreateRow:function(e,t,a){},beforeChange:function(e,t){var a={Action:"",RowNumber:null,Key:{FieldName:"roleid",FieldValue:""},RecordData:{}},n=!1;if("roleid"==r.hotTableComponent.current.hotInstance.getCellMeta(e[0][0],0).prop)for(var o=0;o<r.hotTableComponent.current.hotInstance.getSourceData().length;o++)if(r.hotTableComponent.current.hotInstance.getDataAtCell(o,0)==e[0][3])return!1;for(var l=0;l<r.dataChanges.length;l++)r.dataChanges[l].RowNumber==e[0][0]&&(n=!0,r.dataChanges[l].RecordData[e[0][1]]=e[0][3]);0==n&&(void 0==e[0][2]?(a.Action="I","roleid"==e[0][1]&&(a.Key.FieldValue=e[0][3]),a.RowNumber=e[0][0],a.RecordData[e[0][1]]=e[0][3]):(a.Action="U",a.RowNumber=e[0][0],a.Key.FieldValue=r.hotTableComponent.current.hotInstance.getDataAtCell(e[0][0],0),a.RecordData[e[0][1]]=e[0][3]),r.dataChanges.push(a)),console.log(r.dataChanges)},afterChange:function(e,t){"loadData"!==t&&(r.hotTableComponent.current.hotInstance.updateSettings({columns:r.cols}),r.hotTableComponent.current.hotInstance.updateSettings({columns:r.colsEdit}))}},r.state={},r.hotTableComponent=s.a.createRef(),r}return Object(l.a)(a,[{key:"componentWillMount",value:function(){console.log("will mount.."),this.getConfig()}},{key:"render",value:function(){return s.a.createElement("div",{id:"hot-app"},s.a.createElement("button",{id:"btnReset",onClick:this.resetTableData},"Reset"),s.a.createElement("button",{id:"btnSave",onClick:this.getTableData},"Save"),s.a.createElement("button",{id:"btnEdit",onClick:this.editTableData},"Edit"),s.a.createElement("button",{id:"btnLock",onClick:this.lockTableData},"Lock"),s.a.createElement("a",{href:"http://localhost:3001/api/credential/role/download/excel"},"Download"),s.a.createElement(u.a,{data:this.dataSet}))}}]),a}(i.Component);t.default=m},468:function(e,t,a){"use strict";a(576),a(571),a(0),a(572)},494:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(0),o=a.n(n),l=a(700);function r(){return o.a.createElement("div",null,o.a.createElement(l.a,{variant:"text"}),o.a.createElement(l.a,{variant:"rect",width:"100%",height:400}))}},875:function(e,t,a){"use strict";a.d(t,"a",function(){return S});var n=a(412),o=(a(111),a(402)),l=a(0),r=a.n(l),c=(a(347),a(1016)),i=a(1859),s=a(1860),u=a(1856),d=a(1858),h=a(1854),m=a(1889),g=a(1855),p=(a(1857),a(1032),a(1243)),b=a(1172),f=(a(174),a(110)),C=(a(468),a(473)),v=a.n(C),E=a(472),w=a.n(E),y=a(471),R=a.n(y);a(494);function O(e){e.classes;var t=e.onSelectAllClick,a=e.order,n=e.orderBy,l=e.numSelected,c=e.rowCount,i=(e.onRequestSort,[]),s=0;if(e.schema){var d,m=Object(o.a)(e.schema);try{for(m.s();!(d=m.n()).done;){var p=d.value;0==s?i.push({id:"no",numeric:!0,disablePadding:!0,label:"No"}):i.push({id:p,numeric:!1,disablePadding:!1,label:p}),s++}}catch(f){m.e(f)}finally{m.f()}}return r.a.createElement(h.a,null,r.a.createElement(g.a,null,r.a.createElement(u.a,{padding:"checkbox"},r.a.createElement(b.a,{color:"primary",indeterminateIcon:r.a.createElement(R.a,null),icon:r.a.createElement(w.a,null),checkedIcon:r.a.createElement(v.a,null),indeterminate:l>0&&l<c,checked:c>0&&l===c,onChange:t,inputProps:{"aria-label":"select all desserts"}})),i.map(function(e){return r.a.createElement(u.a,{key:e.id,sortDirection:n===e.id&&a},e.label)})))}Object(c.a)(function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:"#0078d4",backgroundColor:"#c7e0f4"}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"}}});var k=Object(c.a)(function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},tableRow:{"&$selected,&$hover:hover":{backgroundColor:"#c7e0f4"}},hover:{},selected:{},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}});function S(e){var t=k(),a=Object(f.useSelector)(function(e){return e.userSettingSelected}),o=Object(f.useSelector)(function(e){return e.rowperpageUser}),c=Object(f.useDispatch)(),h=r.a.useState("none"),C=Object(n.a)(h,2),E=C[0],y=C[1],R=r.a.useState("asc"),S=Object(n.a)(R,2),N=S[0],I=S[1],T=r.a.useState("calories"),j=Object(n.a)(T,2),D=j[0],A=j[1],x=r.a.useState(a.selectedId),P=Object(n.a)(x,2),M=P[0],F=P[1],H=r.a.useState(o.halaman-1),K=Object(n.a)(H,2),V=K[0],L=K[1],U=r.a.useState(!1),B=Object(n.a)(U,2),W=(B[0],B[1],r.a.useState(o.jumlah)),z=Object(n.a)(W,2),_=z[0],q=z[1];Object(l.useEffect)(function(){F(a.selectedId)},[a.selectedId]);e.data;var J=function(e,t){return{type:"SELECTEDUSER",payload:{selectedUser:e,selectedId:t}}},$=function(e){"INPUT"==e.target.nodeName?e.target.parentNode.parentNode.style.display="none":null==e.target.parentNode||null==e.target.parentNode.children[0]||null==e.target.parentNode.children[0].children[0]||(e.target.parentNode.children[0].children[0].style.display="none")},G=function(e,t){return{type:"CHANGEROWUSER",payload:{jumlah:e,halaman:t}}},Q=function(e){null==e.target.parentNode||null==e.target.parentNode.children[0]||null==e.target.parentNode.children[0].children[0]||(e.target.parentNode.children[0].children[0].style.display="block")};Object(l.useEffect)(function(){M.length>0?y("block"):y("none")},[M]);Object(l.useEffect)(function(){console.log(_+" "+V)},[V]);Math.min(_,[].length-V*_);return r.a.createElement("div",{className:t.root},r.a.createElement(p.a,{className:t.paper},r.a.createElement(d.a,null,r.a.createElement(i.a,{fixedHeader:!0,className:t.table,"aria-labelledby":"tableTitle",size:"small","aria-label":"enhanced table"},r.a.createElement(O,{classes:t,numSelected:M.length,order:N,orderBy:D,onSelectAllClick:function(t){if(M.length>0)c(J(0,[])),F([]);else if(t.target.checked){var a=e.data.map(function(t){return t[e.schema[0]]}),n=a.length;return c(J(n,a)),void F(a)}c(J(0,[])),F([])},onRequestSort:function(e,t){I(D===t&&"asc"===N?"desc":"asc"),A(t)},rowCount:e.jumlahdata,schema:e.schema}),r.a.createElement(s.a,null,e.data.map(function(a,n){var o,l=(o=a[e.schema[0]],-1!==M.indexOf(o)),i="enhanced-table-checkbox-".concat(a[e.schema[0]]);return r.a.createElement(g.a,{id:"rowcheck",hover:!0,className:t.tableRow,classes:{hover:t.hover,selected:t.selected},style:{cursor:"pointer"},onMouseEnter:0==M.length?Q:null,onMouseLeave:0==M.length?$:null,onClick:function(t){return function(e,t){var a=M.indexOf(t),n=[];-1===a?n=n.concat(M,t):0===a?n=n.concat(M.slice(1)):a===M.length-1?n=n.concat(M.slice(0,-1)):a>0&&(n=n.concat(M.slice(0,a),M.slice(a+1)));var o=n.length;c(J(o,n)),F(n)}(0,a[e.schema[0]])},role:"checkbox","aria-checked":l,tabIndex:1,key:n,selected:l},r.a.createElement(u.a,{padding:"checkbox"},r.a.createElement(b.a,{style:{display:E},checked:l,icon:r.a.createElement(w.a,null),checkedIcon:r.a.createElement(v.a,null),color:"primary",inputProps:{"aria-labelledby":i}})),r.a.createElement(u.a,{key:"nowrap"},n+1+(_*(V+1)-_)),e.schema.map(function(e,t){if(0!=t)return r.a.createElement(u.a,{key:t},a[e].length>15&&!l?a[e].slice(0,15).concat("..."):a[e].length>50?a[e].slice(0,50).concat("..."):a[e])}))})))),r.a.createElement(m.a,{rowsPerPageOptions:[5,10,25],component:"div",count:e.jumlahdata,rowsPerPage:_,page:V,onChangePage:function(e,t){L(t),c(G(_,t+1))},onChangeRowsPerPage:function(e){q(parseInt(e.target.value,10)),c(G(e.target.value,1)),L(0)}})))}}}]);
//# sourceMappingURL=28.71ceac68.chunk.js.map