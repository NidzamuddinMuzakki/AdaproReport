(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{1805:function(e,t,a){"use strict";a.r(t);var n=a(111),o=a(419),r=a(422),l=a(425),c=a(424),i=a(0),s=a.n(i),u=(a(63),a(338),a(1081),a(869)),d=(a(875),a(750)),h=a(404),g=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(e){var r,l;return Object(o.a)(this,a),(l=t.call(this,e)).getTableData=function(){l.hotTableComponent.current.hotInstance.updateSettings({columns:l.cols}),l.hotTableComponent.current.hotInstance.validateColumns([0,1,2],function(e){e?h.a.post("/api/credential/role/put",null,{params:{data:l.dataChanges,len:l.hotTableComponent.current.hotInstance.getSourceData().length}}).then(function(e){}):alert("Invalid!")})},l.resetTableData=function(){l.getRoleData(),l.dataChanges=[]},l.lockTableData=function(){for(var e=0;e<l.cols.length;e++)l.cols[e].readOnly=!0;l.hotTableComponent.current.hotInstance.updateSettings({columns:l.cols})},l.editTableData=function(){for(var e=0;e<l.cols.length;e++)l.cols[e].readOnly=!1;l.hotTableComponent.current.hotInstance.updateSettings({columns:l.colsEdit,colHeaders:l.colsHeader})},l.createEmptyCell=function(e,t){for(var a=[],n=[],o=0;o<e;o++){for(var r=0;r<t;r++)n.push("");a.push(n),n=[]}return a},l.handleChange=function(e,t){return function(a){l.setState({settings:Object(n.a)({},e,t[a.target.checked?1:0])})}},l.getConfig=function(){h.a.get("/api/report/config/get?report=LB01").then(function(e){console.log(e.data.table)})},l.cols=[{data:"roleid",readOnly:!0,allowEmpty:!1},{data:"rolename",readOnly:!0,allowEmpty:!1}],l.colsEdit=[{data:"roleid",readOnly:!1,allowEmpty:!1},{data:"rolename",readOnly:!1,allowEmpty:!1}],l.colsHeader=["Role ID","Role Name"],l.dataChanges=[],l.hotSettings={columns:l.colsEdit,colWidths:[150,200],width:"100%",height:320,rowHeights:23,rowHeaders:!0,columnSorting:!0,contextMenu:{items:(r={undo:{},redo:{},separator:d.a.plugins.ContextMenu.SEPARATOR,row_above:{name:"Insert row above"},row_below:{}},Object(n.a)(r,"separator",d.a.plugins.ContextMenu.SEPARATOR),Object(n.a)(r,"remove_row",{}),Object(n.a)(r,"separator",d.a.plugins.ContextMenu.SEPARATOR),r)},manualColumnResize:!0,manualRowResize:!0,manualRowMove:!0,manualColumnMove:!0,afterOnCellMouseOver:function(e,t){!1===l.cols[0].readOnly&&"roleid"===l.hotTableComponent.current.hotInstance.getCellMeta(t.row,t.col).prop&&l.hotTableComponent.current.hotInstance.updateSettings({columns:l.colsEdit})},beforeRemoveRow:function(e,t,a){console.log(e+" - "+t),console.log(l.hotTableComponent.current.hotInstance.getCellMeta(e,0).prop);for(var n={Action:"",RowNumber:null,Key:{FieldName:"roleid",FieldValue:""},RecordData:{}},o="",r="",c=!1,i=0;i<l.dataChanges.length;i++)l.dataChanges[i].RowNumber==e&&(o=l.dataChanges[i].Action,r=l.dataChanges[i].Key.FieldValue,l.dataChanges.splice(i,1),c=!0);c&&"I"!=o?(n.Action="D",n.RowNumber=null,n.Key.FieldValue=r,l.dataChanges.push(n)):(n.Action="D",n.RowNumber=null,n.Key.FieldValue=l.hotTableComponent.current.hotInstance.getDataAtCell(e,0),l.dataChanges.push(n)),console.log(e);for(var s=0;s<l.dataChanges.length;s++)l.dataChanges[s].RowNumber>=e&&(l.dataChanges[s].RowNumber-=1);console.log(l.dataChanges)},afterRemoveRow:function(e,t,a){},beforeCreateRow:function(e,t,a){console.log(e);for(var n=0;n<l.dataChanges.length;n++)l.dataChanges[n].RowNumber>=e&&(l.dataChanges[n].RowNumber+=1);console.log(l.dataChanges)},afterCreateRow:function(e,t,a){},beforeChange:function(e,t){var a={Action:"",RowNumber:null,Key:{FieldName:"roleid",FieldValue:""},RecordData:{}},n=!1;if("roleid"==l.hotTableComponent.current.hotInstance.getCellMeta(e[0][0],0).prop)for(var o=0;o<l.hotTableComponent.current.hotInstance.getSourceData().length;o++)if(l.hotTableComponent.current.hotInstance.getDataAtCell(o,0)==e[0][3])return!1;for(var r=0;r<l.dataChanges.length;r++)l.dataChanges[r].RowNumber==e[0][0]&&(n=!0,l.dataChanges[r].RecordData[e[0][1]]=e[0][3]);0==n&&(void 0==e[0][2]?(a.Action="I","roleid"==e[0][1]&&(a.Key.FieldValue=e[0][3]),a.RowNumber=e[0][0],a.RecordData[e[0][1]]=e[0][3]):(a.Action="U",a.RowNumber=e[0][0],a.Key.FieldValue=l.hotTableComponent.current.hotInstance.getDataAtCell(e[0][0],0),a.RecordData[e[0][1]]=e[0][3]),l.dataChanges.push(a)),console.log(l.dataChanges)},afterChange:function(e,t){"loadData"!==t&&(l.hotTableComponent.current.hotInstance.updateSettings({columns:l.cols}),l.hotTableComponent.current.hotInstance.updateSettings({columns:l.colsEdit}))}},l.state={},l.hotTableComponent=s.a.createRef(),l}return Object(r.a)(a,[{key:"componentWillMount",value:function(){console.log("will mount.."),this.getConfig()}},{key:"render",value:function(){return s.a.createElement("div",{id:"hot-app"},s.a.createElement("button",{id:"btnReset",onClick:this.resetTableData},"Reset"),s.a.createElement("button",{id:"btnSave",onClick:this.getTableData},"Save"),s.a.createElement("button",{id:"btnEdit",onClick:this.editTableData},"Edit"),s.a.createElement("button",{id:"btnLock",onClick:this.lockTableData},"Lock"),s.a.createElement("a",{href:"http://localhost:3001/api/credential/role/download/excel"},"Download"),s.a.createElement(u.a,{data:this.dataSet}))}}]),a}(i.Component);t.default=g},469:function(e,t,a){"use strict";a(580),a(575),a(0),a(576)},495:function(e,t,a){"use strict";a.d(t,"a",function(){return l});var n=a(0),o=a.n(n),r=a(695);function l(){return o.a.createElement("div",null,o.a.createElement(r.a,{variant:"text"}),o.a.createElement(r.a,{variant:"rect",width:"100%",height:400}))}},869:function(e,t,a){"use strict";a.d(t,"a",function(){return U});var n=a(569),o=(a(111),a(403)),r=a(413),l=a(0),c=a.n(l),i=(a(346),a(1007)),s=a(1811),u=a(1812),d=a(1808),h=a(1157),g=a(1810),p=a(1806),m=a(1840),b=a(1807),f=a(1748),v=(a(1809),a(1022),a(1226)),C=a(1150),w=a(508),E=a.n(w),y=a(871),x=a.n(y),S=a(872),R=a.n(S),k=(a(174),a(110)),O=(a(469),a(478)),I=a.n(O),j=a(477),N=a.n(j),T=a(476),D=a.n(T),A=(a(495),a(1019)),z=a(1832),P=a(1818),M=a(1817),H=a(1488),B=a(1775),F=a(1085);c.a.forwardRef(function(e,t){return c.a.createElement(B.a,Object.assign({direction:"up",ref:t},e))});function L(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}function W(e){var t=e.classes,a=e.onSelectAllClick,n=e.order,l=e.orderBy,i=e.numSelected,s=e.rowCount,u=e.onRequestSort,h=c.a.useState([]),g=Object(r.a)(h,2),m=g[0],v=g[1],w=function(e){var t=e.target.clientX,a=(e.target.clientY,e.target.parentNode.children[0]);!function(e,t){if(-1==Object.keys(m).findIndex(function(t){return t==e})&&e.toString().includes("resize")){var a=m;a[e]=t,v(a),console.log(m)}}(e.target.id,e.target.parentNode.children[0].getBoundingClientRect().width),window.addEventListener("mousemove",o),window.addEventListener("mouseup",function e(){window.removeEventListener("mousemove",o);window.removeEventListener("mouseup",e)});var n=e.target.parentNode.children[0].getBoundingClientRect().width+10;m[e.target.id];function o(e){var o=a.getBoundingClientRect();n=isNaN(o.width-(t-e.clientX))?n:o.width-(t-e.clientX),a.style.width=o.width-(t-e.clientX)+"px",t=e.clientX,e.clientY}},E=[],y=0;if(e.schema){var x,S=Object(o.a)(e.schema);try{for(S.s();!(x=S.n()).done;){var R=x.value;0==y?E.push({id:"no",numeric:!0,disablePadding:!0,label:"No"}):E.push({id:R,numeric:!1,disablePadding:!1,label:R}),y++}}catch(j){S.e(j)}finally{S.f()}}var k=function(e){e.target.closest("TH")&&(e.target.closest("TH").children[1].style.display="block",e.target.closest("TH").children[1].style.cursor="col-resize")},O=function(e){e.target.closest("TH")&&(e.target.closest("TH").children[1].style.display="none")};return c.a.createElement(p.a,null,c.a.createElement(b.a,null,c.a.createElement(d.a,{style:{boxShadow:"rgba(0, 0, 0, 0.04) 0px 10px 10px",position:"sticky",top:0,background:"white",zIndex:20},padding:"checkbox"},c.a.createElement(C.a,{color:"primary",indeterminateIcon:c.a.createElement(D.a,null),icon:c.a.createElement(N.a,null),checkedIcon:c.a.createElement(I.a,null),indeterminate:i>0&&i<s,checked:s>0&&i===s,onChange:a,inputProps:{"aria-label":"select all desserts"}})),E.map(function(e){return c.a.createElement(d.a,{onMouseEnter:k,onMouseLeave:O,style:{boxShadow:"rgba(0, 0, 0, 0.04) 0px 10px 10px",zIndex:20,position:"sticky",top:0,background:"white",fontWeight:"bold"},key:e.id,sortDirection:l===e.id&&n},c.a.createElement(f.a,{className:t.sort,active:l===e.id,direction:l===e.id?n:"asc",onClick:(a=e.id,function(e){e.target.id.toString().includes("resize")||u(e,a)})},e.label,l===e.id?c.a.createElement("span",{className:t.visuallyHidden},"desc"===n?"sorted descending":"sorted ascending"):null,"\xa0"),c.a.createElement("div",{id:"resize"+e.label,onMouseDown:w,style:{display:l===e.id?"block":"none",position:"absolute",right:10,width:2,top:0,bottom:0,height:"100%",borderRight:"3px solid rgba(0,0,0,0.5)"}}));var a})))}Object(i.a)(function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:"#0078d4",backgroundColor:"#c7e0f4"}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%",fontWeight:"bold"}}});var K=Object(i.a)(function(e){return{root:{width:"100%"},paper:{width:"100%",position:"relative",marginBottom:e.spacing(2)},sort:{"&$selected":{}},table:{minWidth:750},tableRow:{"&$selected":{backgroundColor:"rgba(204, 219, 232,0.5)"},"&$selected:hover":{boxShadow:"rgba(14, 30, 37, 0.12) 0px 2px 4px 0px, rgba(14, 30, 37, 0.32) 0px 2px 16px 0px"},"&$hover:hover":{backgroundColor:"white",cursor:"pointer",boxShadow:"rgba(14, 30, 37, 0.12) 0px 2px 4px 0px, rgba(14, 30, 37, 0.32) 0px 2px 16px 0px"},"&$hover:hover td:nth-child(2) span  ":{display:"none !important"},"&$hover:hover td:nth-child(1) span  ":{display:"block !important"},"&$hover:hover td:nth-child(2) div  ":{display:"flex !important"}},someTextField:{height:20,width:"100%",textAlign:"center"},changeRow:{position:"absolute",left:5,bottom:10,fontSize:10,fontWeight:"bold","&:hover":{boxShadow:"rgba(0, 0, 0, 0.16) 0px 3px 6px, rgba(0, 0, 0, 0.23) 0px 3px 6px"}},changeRowButton:{fontSize:10,fontWeight:"bold","&:hover":{boxShadow:"rgba(0, 0, 0, 0.16) 0px 3px 6px, rgba(0, 0, 0, 0.23) 0px 3px 6px"}},icon:{"&:hover":{color:"black"}},hover:{},selected:{},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}});function U(e){var t=K(),a=Object(k.useSelector)(function(e){return e.userSettingSelected}),o=Object(k.useSelector)(function(e){return e.rowperpageUser}),i=Object(k.useDispatch)(),p=Object(k.useSelector)(function(e){return e.ComboRowPerpage.user}),f=c.a.useState(p),w=Object(r.a)(f,2),y=w[0],S=w[1],O=c.a.useState("none"),j=Object(r.a)(O,2),T=j[0],D=j[1],B=c.a.useState("asc"),U=Object(r.a)(B,2),V=U[0],$=U[1],X=c.a.useState("calories"),Y=Object(r.a)(X,2),_=Y[0],q=Y[1],G=c.a.useState(a.selectedId),J=Object(r.a)(G,2),Q=J[0],Z=J[1],ee=c.a.useState(o.halaman-1),te=Object(r.a)(ee,2),ae=te[0],ne=te[1],oe=c.a.useState(!1),re=Object(r.a)(oe,2),le=(re[0],re[1],c.a.useState(o.jumlah)),ce=Object(r.a)(le,2),ie=ce[0],se=ce[1],ue=c.a.useState([]),de=Object(r.a)(ue,2),he=de[0],ge=de[1];Object(l.useEffect)(function(){Z(a.selectedId)},[a.selectedId]);e.data;var pe=function(e,t){return{type:"SELECTEDUSER",payload:{selectedUser:e,selectedId:t}}},me=function(e){},be=function(e){if("combo1"==e.target.name){var t=Object(n.a)(y),a=parseInt(e.target.value?e.target.value:1);parseInt(e.target.value?e.target.value:1)==t[1]&&(a=p[0]),parseInt(e.target.value?e.target.value:1)==t[2]&&(a=p[0]),t[0]=a,S(t)}else if("combo2"==e.target.name){var o=Object(n.a)(y),r=parseInt(e.target.value?e.target.value:1);parseInt(e.target.value?e.target.value:1)==o[0]&&(r=p[1]),parseInt(e.target.value?e.target.value:1)==o[2]&&(r=p[1]),o[1]=r,S(o)}else if("combo3"==e.target.name){var l=Object(n.a)(y),c=parseInt(e.target.value?e.target.value:1);parseInt(e.target.value?e.target.value:1)==l[1]&&(c=p[2]),parseInt(e.target.value?e.target.value:1)==l[0]&&(c=p[2]),l[2]=c,S(l)}},fe=function(e){return{type:"CHANGECOMBOROWUSER",payload:{user:e}}},ve=function(e,t){return{type:"CHANGEROWUSER",payload:{jumlah:e,halaman:t}}},Ce=function(e){};Object(l.useEffect)(function(){Q.length>0?D("block"):D("none")},[Q]);var we=c.a.useState(null),Ee=Object(r.a)(we,2),ye=Ee[0],xe=Ee[1],Se=c.a.useState(!1),Re=Object(r.a)(Se,2),ke=Re[0],Oe=Re[1],Ie=function(){Oe(!1)},je=Boolean(ye);Boolean(ke);Object(l.useEffect)(function(){console.log(ie+" "+ae)},[ae]);Math.min(ie,[].length-ae*ie);return c.a.createElement("div",{className:t.root},c.a.createElement(v.a,{className:t.paper},c.a.createElement(g.a,{style:{maxHeight:360}},c.a.createElement(s.a,{className:t.table,size:"small","aria-label":"caption table"},c.a.createElement(W,{classes:t,numSelected:Q.length,order:V,orderBy:_,onSelectAllClick:function(t){if(Q.length>0)i(pe(0,[])),Z([]);else if(t.target.checked){var a=e.data.map(function(t){return t[e.schema[0]]}),n=a.length;return i(pe(n,a)),void Z(a)}i(pe(0,[])),Z([])},onRequestSort:function(e,t){$(_===t&&"asc"===V?"desc":"asc"),q(t)},rowCount:e.jumlahdata,schema:e.schema}),c.a.createElement(u.a,null,function(e,t){var a=e.map(function(e,t){return[e,t]});return a.sort(function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]}),a.map(function(e){return e[0]})}(e.data,function(e,t){return"desc"===e?function(e,a){return L(e,a,t)}:function(e,a){return-L(e,a,t)}}(V,_)).map(function(a,n){var o,r=(o=a[e.schema[0]],-1!==Q.indexOf(o)),l="enhanced-table-checkbox-".concat(a[e.schema[0]]);return c.a.createElement(b.a,{id:"rowParent"+a[e.schema[0]],hover:!0,className:t.tableRow,classes:{hover:t.hover,selected:t.selected},style:{cursor:"pointer"},onMouseEnter:Ce,onMouseLeave:me,onClick:function(t){return function(t,a){if(t.target.parentNode.id.toString().includes("delete.")||t.target.id.toString().includes("delete.")){var n=[];n.push(a),ge(n),Oe(!0)}else if(t.target.parentNode.id.toString().includes("update.")||t.target.id.toString().includes("update.")){var o=[];o.push(a),e.onClick(o,"update"),i(pe(1,o))}else if(t.target.parentNode.id.toString().includes("change.")||t.target.id.toString().includes("change.")){var r=[];r.push(a),e.onClick(r,"change"),i(pe(1,r))}else{var l=Q.indexOf(a),c=[];-1===l?c=c.concat(Q,a):0===l?c=c.concat(Q.slice(1)):l===Q.length-1?c=c.concat(Q.slice(0,-1)):l>0&&(c=c.concat(Q.slice(0,l),Q.slice(l+1)));var s=c.length;i(pe(s,c)),Z(c)}}(t,a[e.schema[0]])},role:"checkbox","aria-checked":r,tabIndex:1,key:n,selected:r},c.a.createElement(d.a,{padding:"checkbox"},c.a.createElement(C.a,{style:{display:T},checked:r,icon:c.a.createElement(N.a,null),checkedIcon:c.a.createElement(I.a,null),color:"primary",inputProps:{"aria-labelledby":l}})),e.schema.map(function(o,l){return 0==l?c.a.createElement(d.a,{key:l,id:l},c.a.createElement("span",{style:{display:"block"}},n+1+(ie*(ae+1)-ie)),c.a.createElement("div",{style:{display:"none",position:"relative",height:"100%"}},c.a.createElement("div",{style:{position:"absolute",left:-20,top:-13,display:"flex",justifyContent:"center",alignItems:"center"}},c.a.createElement(E.a,{"aria-describedby":"cuyasasasa",id:"delete."+a[e.schema[0]],className:t.icon,fontSize:"default",color:"secondary"}),c.a.createElement(x.a,{className:t.icon,id:"update."+a[e.schema[0]],fontSize:"default",color:"primary"}),c.a.createElement(R.a,{className:t.icon,id:"change."+a[e.schema[0]],fontSize:"default",color:"action"})))):Array.isArray(a[o])?c.a.createElement(d.a,{key:l},a[o].length>0?a[o].map(function(e){return e}).join(", ").length>10&&!r?a[o].map(function(e){return e}).join(", ").slice(0,10).concat("..."):a[o].map(function(e){return e}).join(", ").length>50?a[o].map(function(e){return e}).join(", ").slice(0,50).concat("..."):a[o].map(function(e){return e}).join(", "):""):c.a.createElement(d.a,{key:l},a[o].length>15&&!r?a[o].slice(0,15).concat("..."):a[o].length>50?a[o].slice(0,50).concat("..."):a[o])}))})))),c.a.createElement(m.a,{style:{boxShadow:"rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 2px 6px 2px"},rowsPerPageOptions:y,component:"div",count:e.jumlahdata,rowsPerPage:ie,page:ae,onChangePage:function(e,t){ne(t),i(ve(ie,t+1))},onChangeRowsPerPage:function(e){se(parseInt(e.target.value,10)),i(ve(e.target.value,1)),ne(0)}}),c.a.createElement(A.a,{className:t.changeRow,"aria-describedby":"changeCombo",onClick:function(e){xe(e.currentTarget)}},"Change Row"),c.a.createElement(F.a,{id:"changeCombo",open:je,anchorEl:ye,style:{textAlign:"center"},onClose:function(){xe(null),S(p)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},c.a.createElement(h.a,{name:"combo1",onChange:be,style:{margin:10,width:"80px"},value:y[0],size:"small",id:"outlined-basic",label:"",variant:"outlined",InputProps:{className:t.someTextField},fullWidth:!0}),c.a.createElement(h.a,{style:{margin:10,width:"80px"},name:"combo2",onChange:be,value:y[1],InputProps:{className:t.someTextField},size:"small",id:"outlined-basic",label:"",variant:"outlined"}),c.a.createElement(h.a,{style:{margin:10,width:"80px"},name:"combo3",onChange:be,value:y[2],InputProps:{className:t.someTextField},size:"small",id:"outlined-basic",label:"",variant:"outlined"}),c.a.createElement("br",null),c.a.createElement(A.a,{onClick:function(e){S([5,10,25]),se(parseInt(5,10)),i(ve(5,1)),i(fe([5,10,25])),ne(0),xe(null)},className:t.changeRowButton},"reset"),c.a.createElement(A.a,{className:t.changeRowButton,onClick:function(e){var t=y;S(t.sort(function(e,t){return e-t})),i(fe(t.sort(function(e,t){return e-t}))),se(parseInt(t[0],10)),i(ve(t[0],1)),ne(0),xe(null)}},"save"))),c.a.createElement("div",null,c.a.createElement(z.a,{open:ke,onClose:Ie,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},c.a.createElement(M.a,null,c.a.createElement(H.a,{id:"alert-dialog-slide-description"},"Are You Sure To Delete User ID "+he[0]+" ?")),c.a.createElement(P.a,{style:{display:"flex",justifyContent:"center",alignItems:"center"}},c.a.createElement(A.a,{onClick:Ie,color:"primary"},"No"),c.a.createElement(A.a,{onClick:function(t){e.onClick(he,""),ge([]),Oe(!1)},color:"primary"},"Yes")))))}}}]);
//# sourceMappingURL=28.fb915af6.chunk.js.map